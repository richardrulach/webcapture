// ==UserScript==
// @name         Save selected text
// @namespace    http://tampermonkey.net/
// @version      0.1
// @description  try to take over the world!
// @author       You
// @match        https://docs.microsoft.com/en-us/sql/*
// @match        https://www.safaribooksonline.com/library/*
// @grant        GM_xmlhttpRequest
// ==/UserScript==

(function() {
    'use strict';

    document.onmouseup = function(){
        //console.log(window.getSelection().toString());
        var sHighlightedText = window.getSelection().toString();
        if (sHighlightedText.length > 0) SaveText();
    };


    
})();

function SaveText(s){
GM_xmlhttpRequest({
        method: "POST",
        url: "http://localhost:8028/_srv/WebService.asmx/SaveText",
        data:"inputText=" + encodeURI(s),
        headers: {
            "Content-Type": "application/x-www-form-urlencoded"
        },
        onerror: function(response) {
             alert(response.responseText);
        },
        onload: function(response) {
        //     alert(response.responseText);
        }
    });    
}
